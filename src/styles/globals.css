@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Variables for Light Mode */
:root {
  /* Primary Color Palette - Professional Blue */
  --color-primary-50: 254 242 242;
  --color-primary-100: 254 226 226;
  --color-primary-200: 254 202 202;
  --color-primary-300: 252 165 165;
  --color-primary-400: 248 113 113;
  --color-primary-500: 239 68 68;
  --color-primary-600: 220 38 38;
  --color-primary-700: 185 28 28;
  --color-primary-800: 153 27 27;
  --color-primary-900: 127 29 29;
  --color-primary-950: 69 10 10;

  /* Secondary Color Palette - Elegant Purple */
  --color-secondary-50: 250 245 255;
  --color-secondary-100: 243 232 255;
  --color-secondary-200: 233 213 255;
  --color-secondary-300: 216 180 254;
  --color-secondary-400: 196 181 253;
  --color-secondary-500: 168 85 247;
  --color-secondary-600: 147 51 234;
  --color-secondary-700: 126 34 206;
  --color-secondary-800: 107 33 168;
  --color-secondary-900: 88 28 135;
  --color-secondary-950: 59 7 100;

  /* Accent Color Palette - Vibrant Teal */
  --color-accent-50: 240 253 250;
  --color-accent-100: 204 251 241;
  --color-accent-200: 153 246 228;
  --color-accent-300: 94 234 212;
  --color-accent-400: 45 212 191;
  --color-accent-500: 20 184 166;
  --color-accent-600: 13 148 136;
  --color-accent-700: 15 118 110;
  --color-accent-800: 17 94 89;
  --color-accent-900: 19 78 74;
  --color-accent-950: 4 47 46;

  /* Base Colors - Light Mode */
  --color-background: 255 255 255;
  --color-foreground: 15 23 42;
  --color-muted: 248 250 252;
  --color-muted-foreground: 100 116 139;
  --color-border: 226 232 240;
  --color-input: 248 250 252;
  --color-ring: 59 130 246;

  /* Typography scale (fluid) */
  --size-fluid-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem); /* 12-14px */
  --size-fluid-sm: clamp(0.875rem, 0.8rem + 0.375vw, 1rem); /* 14-16px */
  --size-fluid-base: clamp(1rem, 0.9rem + 0.5vw, 1.125rem); /* 16-18px */
  --size-fluid-lg: clamp(1.125rem, 1rem + 0.625vw, 1.25rem); /* 18-20px */
  --size-fluid-xl: clamp(1.25rem, 1.1rem + 0.75vw, 1.5rem); /* 20-24px */
  --size-fluid-2xl: clamp(1.5rem, 1.3rem + 1vw, 2rem); /* 24-32px */
  --size-fluid-3xl: clamp(1.875rem, 1.5rem + 1.875vw, 2.5rem); /* 30-40px */
  --size-fluid-4xl: clamp(2.25rem, 1.8rem + 2.25vw, 3rem); /* 36-48px */
  --size-fluid-5xl: clamp(3rem, 2.4rem + 3vw, 4rem); /* 48-64px */
  --size-fluid-6xl: clamp(3.75rem, 3rem + 3.75vw, 5rem); /* 60-80px */

  /* Spacing scale */
  --space-container-xs: clamp(0.75rem, 2.5vw, 1.25rem);
  --space-container-sm: clamp(1rem, 3vw, 2rem);
  --space-container-md: clamp(1.25rem, 4vw, 2.5rem);
  --space-container-lg: clamp(1.5rem, 4.5vw, 3rem);
  --space-container-xl: clamp(2rem, 5vw, 4rem);
  /* Material-3 4pt aliases */
  --space-m3-1: 0.25rem; /* 4px */
  --space-m3-2: 0.5rem; /* 8px */
  --space-m3-3: 0.75rem; /* 12px */
  --space-m3-4: 1rem; /* 16px */
  --space-m3-5: 1.25rem; /* 20px */
  --space-m3-6: 1.5rem; /* 24px */
  --space-m3-7: 1.75rem; /* 28px */
  --space-m3-8: 2rem; /* 32px */

  /* Elevation (shadows) */
  --elevation-soft:
    0 1px 2px rgba(0, 0, 0, 0.06), 0 2px 8px rgba(0, 0, 0, 0.08);
  --elevation-glass:
    inset 0 1px 1.5px rgba(255, 255, 255, 0.25),
    inset 0 0 0 1px rgba(255, 255, 255, 0.08), 0 8px 24px rgba(0, 0, 0, 0.15);
  --elevation-deep:
    0 6px 20px rgba(0, 0, 0, 0.25), 0 12px 48px rgba(0, 0, 0, 0.15);

  /* Radii */
  --radius-md: 0.75rem;

  /* Font Variables */
  --font-body:
    var(--font-body), system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI',
    Roboto, sans-serif;
  --font-sans: var(--font-body);
  --font-display:
    var(--font-display), system-ui, -apple-system, BlinkMacSystemFont,
    'Segoe UI', Roboto, sans-serif;
  --font-mono:
    'JetBrains Mono', 'Fira Code', 'Monaco', 'Cascadia Code', 'Ubuntu Mono',
    monospace;
}

/* Auto dark-mode overrides via prefers-color-scheme */
@media (prefers-color-scheme: dark) {
  :root {
    /* Primary Color Palette - Adjusted for dark mode */
    --color-primary-50: 23 37 84;
    --color-primary-100: 30 58 138;
    --color-primary-200: 30 64 175;
    --color-primary-300: 29 78 216;
    --color-primary-400: 37 99 235;
    --color-primary-500: 59 130 246;
    --color-primary-600: 96 165 250;
    --color-primary-700: 147 197 253;
    --color-primary-800: 191 219 254;
    --color-primary-900: 219 234 254;
    --color-primary-950: 239 246 255;

    /* Secondary Color Palette - Adjusted for dark mode */
    --color-secondary-50: 59 7 100;
    --color-secondary-100: 88 28 135;
    --color-secondary-200: 107 33 168;
    --color-secondary-300: 126 34 206;
    --color-secondary-400: 147 51 234;
    --color-secondary-500: 168 85 247;
    --color-secondary-600: 196 181 253;
    --color-secondary-700: 216 180 254;
    --color-secondary-800: 233 213 255;
    --color-secondary-900: 243 232 255;
    --color-secondary-950: 250 245 255;

    /* Accent Color Palette - Adjusted for dark mode */
    --color-accent-50: 4 47 46;
    --color-accent-100: 19 78 74;
    --color-accent-200: 17 94 89;
    --color-accent-300: 15 118 110;
    --color-accent-400: 13 148 136;
    --color-accent-500: 20 184 166;
    --color-accent-600: 45 212 191;
    --color-accent-700: 94 234 212;
    --color-accent-800: 153 246 228;
    --color-accent-900: 204 251 241;
    --color-accent-950: 240 253 250;

    /* Base Colors - Dark Mode */
    --color-background: 2 6 23;
    --color-foreground: 248 250 252;
    --color-muted: 15 23 42;
    --color-muted-foreground: 148 163 184;
    --color-border: 51 65 85;
    --color-input: 15 23 42;
    --color-ring: 147 197 253;
  }
}

/* CSS Variables for Dark Mode */
.dark {
  /* Primary Color Palette - Adjusted for dark mode */
  --color-primary-50: 23 37 84;
  --color-primary-100: 30 58 138;
  --color-primary-200: 30 64 175;
  --color-primary-300: 29 78 216;
  --color-primary-400: 37 99 235;
  --color-primary-500: 59 130 246;
  --color-primary-600: 96 165 250;
  --color-primary-700: 147 197 253;
  --color-primary-800: 191 219 254;
  --color-primary-900: 219 234 254;
  --color-primary-950: 239 246 255;

  /* Secondary Color Palette - Adjusted for dark mode */
  --color-secondary-50: 59 7 100;
  --color-secondary-100: 88 28 135;
  --color-secondary-200: 107 33 168;
  --color-secondary-300: 126 34 206;
  --color-secondary-400: 147 51 234;
  --color-secondary-500: 168 85 247;
  --color-secondary-600: 196 181 253;
  --color-secondary-700: 216 180 254;
  --color-secondary-800: 233 213 255;
  --color-secondary-900: 243 232 255;
  --color-secondary-950: 250 245 255;

  /* Accent Color Palette - Adjusted for dark mode */
  --color-accent-50: 4 47 46;
  --color-accent-100: 19 78 74;
  --color-accent-200: 17 94 89;
  --color-accent-300: 15 118 110;
  --color-accent-400: 13 148 136;
  --color-accent-500: 20 184 166;
  --color-accent-600: 45 212 191;
  --color-accent-700: 94 234 212;
  --color-accent-800: 153 246 228;
  --color-accent-900: 204 251 241;
  --color-accent-950: 240 253 250;

  /* Base Colors - Dark Mode */
  --color-background: 2 6 23;
  --color-foreground: 248 250 252;
  --color-muted: 15 23 42;
  --color-muted-foreground: 148 163 184;
  --color-border: 51 65 85;
  --color-input: 15 23 42;
  --color-ring: 147 197 253;
}

/* Base Styles and Resets */
@layer base {
  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
    font-variant-ligatures: normal;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply bg-background text-foreground font-sans;
    font-synthesis-weight: none;
    text-rendering: optimizeLegibility;
    position: relative;
  }

  /* Premium layered background: radial mesh gradient + subtle noise mask */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    background-image:
      radial-gradient(
        1200px 800px at -10% -10%,
        rgba(220, 38, 38, 0.18),
        transparent 60%
      ),
      radial-gradient(
        1000px 700px at 110% 10%,
        rgba(0, 0, 0, 0.08),
        transparent 60%
      ),
      radial-gradient(
        900px 600px at 20% 120%,
        rgba(220, 38, 38, 0.12),
        transparent 60%
      ),
      radial-gradient(
        700px 500px at 80% 80%,
        rgba(0, 0, 0, 0.06),
        transparent 60%
      ),
      linear-gradient(180deg, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0));
    background-repeat: no-repeat;
    background-size:
      cover,
      cover,
      cover,
      cover,
      100% 100%;
    filter: saturate(105%) contrast(105%);
    opacity: 0.9;
  }

  /* Subtle noise as a mask over the gradient */
  body::after {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    background: #000;
    /* If you add a noise asset at /noise.png it will be used; otherwise this layer is invisible */
    -webkit-mask-image: url('/noise.png');
    mask-image: url('/noise.png');
    -webkit-mask-repeat: repeat;
    mask-repeat: repeat;
    -webkit-mask-size: 128px 128px;
    mask-size: 128px 128px;
    opacity: 0.06;
  }

  @media (prefers-color-scheme: dark) {
    body::before {
      background-image:
        radial-gradient(
          1200px 800px at -10% -10%,
          rgba(220, 38, 38, 0.2),
          transparent 60%
        ),
        radial-gradient(
          1000px 700px at 110% 10%,
          rgba(255, 255, 255, 0.06),
          transparent 60%
        ),
        radial-gradient(
          900px 600px at 20% 120%,
          rgba(220, 38, 38, 0.1),
          transparent 60%
        ),
        radial-gradient(
          700px 500px at 80% 80%,
          rgba(255, 255, 255, 0.04),
          transparent 60%
        ),
        linear-gradient(180deg, rgba(10, 10, 10, 0.9), rgba(10, 10, 10, 0.72));
      filter: saturate(110%) contrast(110%);
      opacity: 1;
    }

    body::after {
      opacity: 0.08;
    }
  }

  /* Typography baseline */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-display font-semibold tracking-tight;
  }

  h1 {
    @apply text-fluid-5xl leading-tight;
  }

  h2 {
    @apply text-fluid-4xl leading-tight;
  }

  h3 {
    @apply text-fluid-3xl leading-snug;
  }

  h4 {
    @apply text-fluid-2xl leading-snug;
  }

  h5 {
    @apply text-fluid-xl leading-normal;
  }

  h6 {
    @apply text-fluid-lg leading-normal;
  }

  p {
    @apply text-fluid-base leading-relaxed;
  }

  /* Links */
  a {
    @apply transition-colors duration-200;

    &:hover {
      @apply text-primary-600 dark:text-primary-400;
    }
  }

  /* Form elements */
  input,
  textarea,
  select {
    @apply bg-input border border-border rounded-md px-3 py-2;
    @apply focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent;
    @apply transition-all duration-200;
  }

  button {
    @apply transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Code elements */
  code {
    @apply font-mono text-sm bg-muted px-1.5 py-0.5 rounded;
  }

  pre {
    @apply font-mono text-sm bg-muted p-4 rounded-lg overflow-x-auto;
  }

  /* Selection */
  ::selection {
    @apply bg-primary-500/20 text-foreground;
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-muted;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-border rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-muted-foreground/50;
  }

  /* Enhanced Focus visible styles for keyboard navigation */
  :focus-visible {
    @apply outline-none ring-2 ring-accent-500 ring-offset-2 ring-offset-background;
    transition: box-shadow 0.2s ease-in-out;
  }

  /* Ensure focus styles are visible with forced colors/high contrast modes */
  @media (forced-colors: active) {
    :focus-visible {
      outline: 2px solid CanvasText !important;
      outline-offset: 2px;
      box-shadow: none !important;
    }
  }

  /* Increase contrast when user requests it */
  @media (prefers-contrast: more) {
    :root {
      --color-border: 0 0 0;
    }
    a,
    button,
    [role='button'] {
      @apply contrast-more:text-foreground contrast-more:outline-2;
    }
  }

  /* Focus styles for interactive elements */
  button:focus-visible,
  a:focus-visible,
  [role='button']:focus-visible {
    @apply ring-2 ring-accent-500 ring-offset-2 ring-offset-background;
  }

  /* Enhanced focus for form elements */
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    @apply ring-2 ring-accent-500 border-accent-500;
  }

  /* Skip link for accessibility */
  .skip-link {
    @apply absolute -top-40 left-6 bg-primary-600 text-white px-4 py-2 rounded-md;
    @apply transition-all duration-200 z-[100];
  }

  .skip-link:focus {
    @apply top-6;
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }

    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

/* Custom utilities */
@layer utilities {
  /* Lightweight prose styles for rich text content */
  .prose-custom {
    @apply text-fluid-base leading-relaxed text-foreground;
  }
  .prose-custom h2 {
    @apply text-fluid-3xl mt-6 mb-3 font-semibold;
  }
  .prose-custom h3 {
    @apply text-fluid-2xl mt-5 mb-2 font-semibold;
  }
  .prose-custom p {
    @apply my-4;
  }
  .prose-custom ul {
    @apply my-4 list-disc pl-6;
  }
  .prose-custom ol {
    @apply my-4 list-decimal pl-6;
  }
  .prose-custom a {
    @apply text-primary-600 hover:text-primary-700 dark:text-primary-400;
  }
  .prose-custom blockquote {
    @apply my-4 border-l-4 border-accent-500 pl-4 text-muted-foreground;
  }
  .prose-custom img {
    @apply rounded-lg shadow-soft;
  }

  .text-gradient {
    background: linear-gradient(
      135deg,
      rgb(var(--color-primary-600)),
      rgb(var(--color-secondary-600))
    );
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% 200%;
    animation: gradient-shift 3s ease infinite;
  }

  @keyframes gradient-shift {
    0%,
    100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  .animate-gradient-shift {
    background-size: 200% 200%;
    animation: gradient-shift 8s ease-in-out infinite;
  }

  .glass-effect {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .dark .glass-effect {
    background: rgba(0, 0, 0, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.05);
  }

  /* Glass utility using Tailwind tokens */
  .glass {
    @apply backdrop-blur-md bg-white/5 dark:bg-white/10;
  }

  .container-fluid {
    @apply w-full max-w-7xl mx-auto px-fluid-sm sm:px-fluid-md lg:px-fluid-lg;
  }

  .section-padding {
    @apply py-fluid-xl lg:py-fluid-2xl;
  }

  /* Responsive debugging utilities - only show in development */
  .debug-responsive {
    @apply fixed top-2 left-2 z-[9999] bg-red-500 text-white px-2 py-1 text-xs font-mono rounded opacity-80 pointer-events-none;
  }

  .debug-responsive::after {
    content: 'XS';
    @apply sm:content-['SM'] md:content-['MD'] lg:content-['LG'] xl:content-['XL'] 2xl:content-['2XL'];
  }

  /* Enhanced focus indicators for better accessibility */
  .focus-ring {
    @apply focus-visible:ring-2 focus-visible:ring-accent-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background;
  }

  /* Utility for scroll-triggered animations */
  .scroll-animate {
    opacity: 0;
    transform: translateY(30px);
    transition:
      opacity 0.6s ease-out,
      transform 0.6s ease-out;
  }

  .scroll-animate.animate {
    opacity: 1;
    transform: translateY(0);
  }

  /* Staggered animation delays */
  .stagger-1 {
    animation-delay: 0.1s;
  }
  .stagger-2 {
    animation-delay: 0.2s;
  }
  .stagger-3 {
    animation-delay: 0.3s;
  }
  .stagger-4 {
    animation-delay: 0.4s;
  }
  .stagger-5 {
    animation-delay: 0.5s;
  }
}

/* Animation utilities */
@layer utilities {
  .animate-fade-in {
    opacity: 0;
    animation: fade-in 0.5s ease-out forwards;
  }

  .animate-slide-up {
    transform: translateY(20px);
    opacity: 0;
    animation: slide-up 0.5s ease-out forwards;
  }

  .animate-slide-in-left {
    transform: translateX(-20px);
    opacity: 0;
    animation: slide-in-left 0.5s ease-out forwards;
  }

  .animate-slide-in-right {
    transform: translateX(20px);
    opacity: 0;
    animation: slide-in-right 0.5s ease-out forwards;
  }

  @keyframes fade-in {
    to {
      opacity: 1;
    }
  }

  @keyframes slide-up {
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slide-in-left {
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slide-in-right {
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
}

/* Print styles */
@media print {
  * {
    color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  .no-print {
    display: none !important;
  }

  .print-only {
    display: block !important;
  }
}
